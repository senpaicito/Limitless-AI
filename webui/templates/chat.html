{% extends "base.html" %}

{% block content %}
<div class="chat-container">
    <div class="chat-sidebar">
        <div class="sidebar-section">
            <h3>üß† Memory Stats</h3>
            <div id="memory-stats">
                <div class="stat-item">
                    <span class="stat-label">Total Memories:</span>
                    <span class="stat-value" id="total-memories">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Vector DB:</span>
                    <span class="stat-value" id="vector-db-status">Loading...</span>
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h3>üòä Emotional State</h3>
            <div id="emotional-state">
                <div class="emotion-display">
                    <span class="emotion-label">Primary:</span>
                    <span class="emotion-value" id="primary-emotion">neutral</span>
                </div>
                <div class="emotion-intensity">
                    <div class="intensity-bar">
                        <div class="intensity-fill" id="intensity-fill" style="width: 50%;"></div>
                    </div>
                    <span class="intensity-text" id="intensity-text">50%</span>
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h3>üîç Semantic Search</h3>
            <div class="search-box">
                <input type="text" id="memory-search" placeholder="Search memories...">
                <button id="search-btn" class="btn-secondary">Search</button>
            </div>
            <div id="search-results" class="search-results"></div>
        </div>
    </div>
    
    <div class="chat-main">
        <div class="chat-header">
            <h2>Chat with {{ character_name }}</h2>
            <div class="chat-actions">
                <button id="clear-chat" class="btn-secondary">Clear Chat</button>
                <button id="export-chat" class="btn-secondary">Export</button>
            </div>
        </div>
        
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will be loaded here by main.js -->
        </div>
        
        <div class="chat-input-container">
            <div class="input-group">
                <textarea id="message-input" placeholder="Type your message here..." rows="3"></textarea>
                <button id="send-button" class="btn-primary">Send</button>
            </div>
            <div class="input-options">
                <label>
                    <input type="checkbox" id="use-semantic-search" checked>
                    Use Semantic Search
                </label>
                <label>
                    <input type="checkbox" id="emotional-context" checked>
                    Emotional Context
                </label>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}